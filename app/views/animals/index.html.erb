<h1>All Animals</h1>

<br>
<% if logged_in? %>
  <div class="btn-group">
    <%= link_to 'New Animal', new_animal_path, class: "btn btn-lg btn-success" %>
  </div>
<% end %>
<br>

<%= form_tag animals_path, :method => 'get' do %>
  <br>
    <%= select_tag :animal, options_for_select([['Show All',nil], ["Dog", "dog"], ['Cat', 'cat'], ['Hamster', 'hamster']]), onchange: 'dropdown()', class: "form-control" %>
    <select name="breed" id="breed" class="form-control">
      <option value="">Select an Animal</option>
    </select>
    <%= select_tag :age, options_for_select([['Any Age', -1],['0~3', 3], ['4~7', 7], ['8~11', 11], ['Other', 12]]), class: "form-control" %>
    <%= submit_tag "Search" %>
  <br>
<% end %>

<br>
  <div class="row">
    <% @animals.each do |animal| %>  
      <div class="col-md-4">
        <img src="/assets/<%= animal.id %>.jpg" class="img-circle" alt="<%= animal.name %>" width="200" height="200">
        <br>
        Name: <%= animal.name %>
        <br>
        Breed: <%= animal.breed %>
        <br>
        Age: <%= animal.age %>
        <br>
        Date Added: <%= animal.date %>
        <br>
        <div class="col-md-4">
          <p><a class="btn btn-info btn-sm" href="/animals/<%= animal.id %>" role="button">View Profile</a></p>
        </div>
        <div class="col-md-4">

        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
          <div class="modal-dialog modal-sm">
            <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Thank you</h4>
              </div>
              <div class="modal-body">
                You just expressed your interest!
              </div>
              
            </div>
          </div>
        </div>
        <% if logged_in? %>

          <%= button_to "Interest", {:controller => "interests", :action => "create", :animal => animal.id, :user => session[:user_id]}, class: "btn btn-primary", :data => {:toggle=>"modal", :target =>".bs-example-modal-sm"}  %>
        <% end %>
        </div>
      </div>
    <% end %>
  </div>
<br>

<script>
  function dropdown() {
    $('#breed').empty();
    var initOption = $('<option>');
    initOption.attr('value', "").text("Select a breed");
    $('#breed').append(initOption);

    var temp;

    if(document.getElementById("animal").value == "dog") temp = ["Golden Retriever", "Terrier"];
    if(document.getElementById("animal").value == "cat") temp = ["Cat1", "Cat2"];
    if(document.getElementById("animal").value == "hamster") temp = ["Hamster1", "Hamster2"];

    for(var i = 0; i < temp.length; i++){
      var newOption = $('<option>');
      newOption.attr('value', temp[i]).text(temp[i]);
      $('#breed').append(newOption);
    }
  } 
</script>
